<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<link href="css/xiaowei.min.css" rel="stylesheet" />

		<style>
			ul {
				font-size: 14px;
				color: #8f8f94
			}
			
			.mui-content > .mui-table-view:first-child {
				margin-top: 2px;
			}
			
			.mui-media {
				padding: 8px !important;
				background-color: #FFFFFF !important
			}
			
			.main-icon {
				float: left;
				background-image: url(images/icon.jpg);
				background-size: 30em;
				height: 100px;
				width: 100px;
				margin: 12px 30px 0 25px
			}
			
			.function-item {
				padding-top: 30px;
				height: 120px;
			}
			
			.function-title {
				font-size: 20px;
				padding-bottom: 10px
			}
			
			.main-button {
				width: 50px;
				height: 50px;
				background-image: url(images/button.jpg);
				background-size: 5em;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" style="padding-right: 15px;">
			<h1 class="mui-title">欢迎您，<span id='account'></span></h1>
		</header>
		<nav class="mui-bar mui-bar-tab app-footer">
			<a class="mui-tab-item mui-active" href="#main">
				<span class="mui-icon mui-icon-home"></span>
				<span class="mui-tab-label">首页</span>
			</a>
			<a class="mui-tab-item" href="#tabbar-with-map">
				<span class="mui-icon mui-icon-gear"></span>
				<span class="mui-tab-label">设置</span>
			</a>
		</nav>
		<div class="mui-content">
			<div id="main" class="mui-control-content mui-active">
				<ul class="mui-table-view mui-table-view-chevron">
					<li class="mui-table-view-cell mui-media" id="table-view-item">
						<a class="mui-navigate-right">
							<div class="main-icon" style="background-position: 0px -30px;"></div>
							<div class="mui-media-body function-item">
								<p class="function-title">堂点</p>
								<p class='mui-ellipsis'>查看全部桌台的状态和信息</p>
							</div>
						</a>
					</li>
					<li class="mui-table-view-cell mui-media" id="fast-order-item">
						<a class='mui-navigate-right' href="javascript:;">
							<div class="main-icon" style="background-position: -110px -30px;"></div>
							<div class="mui-media-body function-item">
								<p class="function-title">快速点餐</p>
								<p class='mui-ellipsis'>快速点餐，更方便，更快捷</p>
							</div>
						</a>
					</li>
				</ul>
				<div id="Gallery" class="mui-slider" style="height: 260px;">
					<div class="mui-slider-group">
						<div class="mui-slider-item">
							<ul class="mui-table-view mui-grid-view mui-grid-9">
								<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4" id="fast-open-item">
									<a href="#">
										<span class="mui-icon main-button" style="background-position: -52px -50px;"></span>
										<div class="mui-media-body">开台</div>
									</a>
								</li>
								<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4" id="fast-combine-item">
									<a href="#">
										<span class="mui-icon main-button" style="background-position: -104px 0px;"><!--span class="mui-badge">5</span--></span>
										<div class="mui-media-body">拼台</div>
									</a>
								</li>
								<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4" id="fast-change-item">
									<a href="#">
										<span class="mui-icon main-button" style="background-position: -154px 0px;"></span>
										<div class="mui-media-body">换台</div>
									</a>
								</li>
								<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4" id="fast-urge-item">
									<a href="#">
										<span class="mui-icon main-button" style="background-position: 0px -104px;"></span>
										<div class="mui-media-body">催菜</div>
									</a>
								</li>
								<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4" id="fast-cancel-item">
									<a href="#">
										<span class="mui-icon main-button"></span>
										<div class="mui-media-body">退菜</div>
									</a>
								</li>
								<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4" id="fast-done-item">
									<a href="#">
										<span class="mui-icon main-button" style="background-position: -50px 0px;"></span>
										<div class="mui-media-body">划菜</div>
									</a>
								</li>
							</ul>
						</div>
						<div class="mui-slider-item">
							<ul class="mui-table-view mui-grid-view mui-grid-9">
								<li class="mui-table-view-cell mui-media mui-col-xs-4 mui-col-sm-4">
									<a href="#">
										<span class="mui-icon mui-icon-more"></span>
										<div class="mui-media-body">更多</div>
									</a>
								</li>
							</ul>
						</div>
					</div>
					<div class="mui-slider-indicator">
						<div class="mui-indicator mui-active"></div>
						<div class="mui-indicator"></div>
					</div>
				</div>
			</div>
			<div id="tabbar-with-map" class="mui-control-content">
				<ul class="mui-table-view">
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							新消息通知
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							隐私
						</a>
					</li>
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							通用
						</a>
					</li>
				</ul>
				<ul class="mui-table-view" style="margin-top: 25px;">
					<li class="mui-table-view-cell">
						<a class="mui-navigate-right">
							参数配置
						</a>
					</li>
				</ul>
				<ul class="mui-table-view" style="margin-top: 25px;">
					<li class="mui-table-view-cell">
						<a style="text-align: center;color: #FF3B30;">
							退出登录
						</a>
					</li>
				</ul>
			</div>
		</div>
		<script src="js/mui.min.js"></script>
		<script src="js/app.js"></script>
		<script src="js/main.js"></script>
		<script>
			(function($, doc) {
				$.init();
				//获取当前登录账户
				var settings = app.getSettings();
				var account = doc.getElementById('account');
				window.addEventListener('show', function() {
					var state = app.getState();
					account.innerText = state.account;
				}, false);
				$.plusReady(function() {
					//					var tablePage = $.preload({
					//						"id": 'table',
					//						"url": 'table.html'
					//					});
					//					var orderPage = $.preload({
					//						"id": 'menu',
					//						"url": 'menu.html'
					//					});
					//堂点
					var tableViewItem = doc.getElementById('table-view-item');
					tableViewItem.addEventListener('tap', function(event) {
						main.setCurrentFunc(main.main_func().table_order);
						$.openWindow({
							id: 'table',
							url: 'table.html',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: true
							},
							createNew: true
						});
						main.setCurrentFunc(main.main_func().table_order);
					});
					
					//快速点餐
					var fastOrderItem = doc.getElementById('fast-order-item');
					fastOrderItem.addEventListener('tap', function(event) {
						main.setCurrentFunc(main.main_func().fast_order);
						$.openWindow({
							id: 'menu',
							url: 'menu.html',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: true
							},
							createNew: true
						});
					});
					
					//开台
					var fastOpenItem = doc.getElementById('fast-open-item');
					fastOpenItem.addEventListener('tap', function(event) {
						main.setCurrentFunc(main.main_func().open_table);
						$.openWindow({
							id: 'fast-open',
							url: 'table_select.html',
							show: {
								aniShow: 'pop-in'
							},
							extras: {
								status: "idle",
								title: "开台",
								callback: "openTable"
							},
							createNew: true
						});
					});
					
					//换台
					var fastChangeItem = doc.getElementById('fast-change-item');
					fastChangeItem.addEventListener('tap', function(event) {
						main.setCurrentFunc(main.main_func().change_table);
						$.openWindow({
							id: 'fast-change',
							url: 'table_select.html',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: true
							},
							extras: {
								status: "opened|ordered",
								title: "换台",
								callback: "selectTableForChange"
							},
							createNew: true
						});
					});
					
					//催菜
					var fastUrgeItem = doc.getElementById('fast-urge-item');
					fastUrgeItem.addEventListener('tap', function(event) {
						main.setCurrentFunc(main.main_func().urge_dish);
						$.openWindow({
							id: 'urge',
							url: 'table_select.html',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: true
							},
							extras: {
								status: "ordered",
								title: "催菜",
								callback: "selectTableForUrgeDish"
							},
							createNew: true
						});
					});
					
					//退菜
					var fastCancelItem = doc.getElementById('fast-cancel-item');
					fastCancelItem.addEventListener('tap', function(event) {
						main.setCurrentFunc(main.main_func().cancel_dish);
						$.openWindow({
							id: 'cancel',
							url: 'table_select.html',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: true
							},
							extras: {
								status: "ordered",
								title: "退菜",
								callback: "selectTableForCancelDish"
							},
							createNew: true
						});
					});
					
					//划菜
					var fastDoneItem = doc.getElementById('fast-done-item');
					fastDoneItem.addEventListener('tap', function(event) {
						main.setCurrentFunc(main.main_func().mark_dish);
						$.openWindow({
							id: 'fast-change',
							url: 'table_select.html',
							show: {
								aniShow: 'pop-in'
							},
							styles: {
								popGesture: 'hide'
							},
							waiting: {
								autoShow: true
							},
							extras: {
								status: "ordered",
								title: "划菜",
								callback: "selectTableForDoneDish"
							},
							createNew: true
						});
					});
					//--
					$.oldBack = mui.back;
					var backButtonPress = 0;
					$.back = function(event) {
						backButtonPress++;
						if (backButtonPress > 1) {
							plus.runtime.quit();
						} else {
							plus.nativeUI.toast('再按一次退出应用');
						}
						setTimeout(function() {
							backButtonPress = 0;
						}, 1000);
						return false;
					};
				});
			}(mui, document));
		</script>
	</body>

</html>